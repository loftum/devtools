<html lang="en" style="overflow: scroll;">
<head>
    <title>Vnet</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="vnet.js"></script>
    <style>
        :root {
            font-family: "Arial",serif;
            margin: 0;
            padding: 0;
        }
        html,
        body {
            box-sizing: border-box;
            margin: 0;
        }
        
        html {
            background: pink;
        }
        v-net,
        ip-range {
            border-radius: 5px;
            padding: 0;
            border: 1px solid #eeeeee;
            background: white;
            color: #eeeeee;
            margin: 3px;
        }
        
        v-net.registered {
            border: 1px solid black;
            color: black;
        }
        v-net.hovered {
            background: lightblue;
        }
        
    </style>
</head>
<body style="overflow: visible;">

    <v-net id="net" cidr="10.0.0.0/7" name="all">
        
    </v-net>

</body>
<script>
    
(function() {
    
    const model = new VNet(undefined, IpRange.parse("10.0.0.0/8"));
    model.add("pølse", "10.1.0.0/16");
    model.add("lompe", "10.0.0.0/16");
    model.add("ketchup", "10.175.10.0/24");
    model.add("sennep", "10.175.10.0/24");
    model.add("ambolt", "10.144.68.0/22");
    model.add("agurk", "10.144.64.0/22");
    model.add("maursluker", "10.133.0.0/20");
    model.add("villsvin", "10.240.0.0/21");
    model.add("brekkjern", "10.128.0.0/21");
    model.add("tomat", "10.170.38.0/24");
    model.add("pølsebil", "10.170.16.0/22");
    model.add("radiator", "10.170.44.0/24");
    model.add("psykologi", "10.170.42.0/24");
    model.add("terningkast", "10.170.36.0/23");
    model.add("andre ting", "10.170.40.0/24");
    model.add("vet ikke", "10.170.45.0/24");
    model.add("up for grabs", "10.244.16.0/20");
    model.add("svømmeføtter", "10.128.32.0/20");
    model.add("høyttaler", "10.128.16.0/20");
    model.add("radio", "10.128.64.0/18");
    model.add("tv", "10.244.80.0/22");
    model.add("fiskeboller", "10.140.0.0/22");
    model.add("gullfisk", "10.240.8.0/21");
    model.add("ladekabel", "10.128.8.0/21");
    model.add("pinnsvin", "10.244.0.0/20");
    model.add("grantre", "10.128.48.0/20");
    model.add("furunål", "10.244.32.0/23");
    model.add("artisjokk", "10.244.34.0/23");
    model.add("karbonade", "10.142.100.0/23");
    model.add("tannkremtube", "10.143.102.0/23");
    model.add("garasjeport", "10.143.100.0/23");
    model.add("alfa romeo", "10.0.0.0/16");
    
    document.getElementById("net").vnet = model;
    
    const body = document.getElementsByTagName("body")[0];
    zoomer(body);
    
    function zoomer(body) {
        const isMac = window.navigator.userAgent.indexOf("Mac") !== -1;

        let metaPressed = false;

        document.addEventListener("keydown", function(e) {
            console.log(e.key);
            metaPressed = isMac ? e.metaKey : e.ctrlKey;

            if (!metaPressed) {
                return;
            }

            switch(e.key){
                case "0":
                    e.preventDefault();
                    resetZoom();
                    break;
                case "+":
                    e.preventDefault();
                    zoomIn();
                    break;
                case "-":
                    e.preventDefault();
                    zoomOut();
                    break;
            }

        });

        document.addEventListener("keyup", function(e) {
            if (isMac && e.key === "Meta") {
                metaPressed = false;
            }
            else if (e.key === "Control"){
                metaPressed = false;
            }
        });

        let zoom = 1;
        const speed = .015;

        document.addEventListener("wheel", function(e) {
            if (!metaPressed){
                return;
            }
            if (e.deltaY < 0) {
                e.preventDefault();
                zoomIn();
            }
            else {
                e.preventDefault();
                zoomOut();
            }
        });
        
        function resetZoom() {
            body.style.transform = "";
        }
        
        function zoomIn() {
            if (zoom >= 2){
                return;
            }
            zoom += speed;
            body.style.transform = `scale(${zoom})`;
        }
        
        function zoomOut() {
            if (zoom <= .1){
                return;
            }
            zoom -= speed;
            body.style.transform = `scale(${zoom})`;
        }
        
    }
})();
</script>
</html>